(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc4fa7e0"],{"32e6":function(t,e,s){"use strict";var i=s("dcb3"),a=s.n(i);a.a},"535f":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loading?s("div",{staticClass:"text-center"},[s("p",{staticClass:"mb-5"},[t._v(" ")]),s("b-spinner",{staticClass:"mt-5",staticStyle:{width:"8rem",height:"8rem"},attrs:{variant:"atlas",label:"A carregar..."}})],1):s("div",[s("div",[s("TitleAtlas",[s("b",{staticClass:"text-atlas2"},[t._v("["+t._s(t.event.category)+"]")]),t._v("\n\t\t\t\t"+t._s(t.event.name)+"\n\t\t\t\t"),t.btnConditions()?[s("button",{staticClass:"btn btn-atlas2",on:{click:function(e){t.modalEdit=!0}}},[s("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"btn btn-danger ml-2",on:{click:function(e){t.btnRemoveClicked()}}},[s("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]:t._e()],2),s("div",{staticClass:"row"},[s("div",{staticClass:"ml-auto mr-auto mb-2",class:"Vertical"===t.event.picture.poster.orientation?"col-lg-4 col-md-5 col-6":"col-lg-6 col-12"},[s("img",{staticClass:"img-fluid img-thumbnail",attrs:{src:t.event.picture.poster.url}}),s("img",{staticStyle:{position:"absolute",top:"5px"},style:t.windowWidth>=1200?"right: 310px;":t.windowWidth>=992?"right: 250px;":t.windowWidth>=768?"right: 230px;":"right: 200px;",attrs:{src:"https://api.qrserver.com/v1/create-qr-code/?size=50x50&data=http://localhost:8080/evento/"+t.event.id+"?inscrever=sim",alt:""}})]),s("div",{class:"Vertical"===t.event.picture.poster.orientation?"col-lg-8 col-12":"col-12"},[s("div",[s("h4",[t._v("Descrição:")]),t._v("\n\t\t\t\t\t\t"+t._s(t.event.description)+"\n\t\t\t\t\t")]),s("hr",{staticClass:"bg-atlas1"}),s("div",[s("div",[s("i",{staticClass:"fa fa-map-marker-alt text-atlas1",attrs:{"aria-hidden":"true"}}),s("router-link",{staticClass:"text-atlas2 ml-1",attrs:{to:{name:"events",query:{sala:t.event.classroom}}}},[t._v(t._s(t.event.classroom))])],1),s("div",[s("i",{staticClass:"fa fa-calendar-alt text-atlas1 mr-1",attrs:{"aria-hidden":"true"}}),t.event.dateStart===t.event.dateEnd?s("span",[t._v(t._s(t.$moment(t.event.dateStart).format("dddd[,] LL")))]):s("span",[t._v(t._s(t.$moment(t.event.dateStart).format("dddd[,] LL"))+" - "+t._s(t.$moment(t.event.dateEnd).format("dddd[,] LL")))])]),s("div",[s("i",{staticClass:"fa fa-clock text-atlas1",attrs:{"aria-hidden":"true"}}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.event.hourStart)+" - "+t._s(t.event.hourEnd)+"\n\t\t\t\t\t\t")]),s("div",[s("router-link",{staticClass:"text-atlas2",attrs:{to:{name:"profile",params:{username:t.event.author.username}}}},[s("i",{staticClass:"fa fa-microphone-alt text-atlas1",attrs:{"aria-hidden":"true"}}),t._v("\n\t\t\t\t\t\t\t\t@"+t._s(t.event.author.username)+"\n\t\t\t\t\t\t\t")])],1),s("div",[s("i",{staticClass:"fa fa-users text-atlas1 mr-1",attrs:{"aria-hidden":"true"}}),t.event.enrollments.length?s("a",{staticClass:"text-atlas2",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.modalEnrollments=!0}}},[t._v(t._s(t.event.enrollments.length)+" "+t._s(t.$moment(t.event.dateEnd+" "+t.event.hourEnd).isBefore(t.$moment())?"foram":1===t.event.enrollments.length?"vai":"vão"))]):[t._v(t._s(t.event.enrollments.length)+" "+t._s(t.$moment(t.event.dateEnd+" "+t.event.hourEnd).isBefore(t.$moment())?"foram":1===t.event.enrollments.length?"vai":"vão"))]],2),s("div",[s("i",{staticClass:"fa fa-tags text-atlas1",attrs:{"aria-hidden":"true"}}),t._l(t.event.tags,function(e){return s("router-link",{key:"tag_"+e._id,staticClass:"text-atlas2",attrs:{to:{name:"events",query:{tags:e.name}}}},[t._v("#"+t._s(e.name))])})],2),s("div",[s("i",{staticClass:"fa fa-graduation-cap text-atlas1 mr-1",attrs:{"aria-hidden":"true"}}),t._l(t.event.courses,function(e,i){return s("span",{key:"course_"+e._id},[s("router-link",{staticClass:"text-atlas2",attrs:{to:{name:"events",query:{curso:e.abbreviation}}}},[t._v(t._s(e.name))]),i<t.event.courses.length-1?s("span",[t._v(" / ")]):t._e()],1)})],2),t.event.paid?s("div",[s("i",{staticClass:"fa fa-sign-in-alt text-atlas1",attrs:{"aria-hidden":"true"}}),t._v("\n\t\t\t\t\t\t\tPreço de inscrição "+t._s(t.event.paymentPrice)+" €\n\t\t\t\t\t\t")]):t._e()]),t.$moment(t.event.dateEnd).isSameOrAfter(t.$moment().format("YYYY-MM-DD"))&&3!==t.getLoggedUser.profileId?[s("hr",{staticClass:"bg-atlas1"}),s("button",{staticClass:"btn btn-atlas2 px-5 col-12 mr-auto ml-auto mt-2",staticStyle:{"border-radius":"2em"},on:{click:function(e){t.btnEnrollmentClicked()}}},[s("i",{staticClass:"fa text-teca4",class:t.event.enrollments.some(function(e){return e.user._id===t.getLoggedUser._id})?"fa-sign-out-alt":"fa-sign-in-alt"}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.event.enrollments.some(function(e){return e.user._id===t.getLoggedUser._id})?"Desinscrever-me":"Inscrever-me")+"\n\t\t\t\t\t\t")])]:t._e()],2)])],1),t.event.picture.gallery.length?s("div",{staticClass:"mt-5"},[s("TitleAtlas",[t._v("Galeria")]),s("b-carousel",{attrs:{id:"picturesCarousel",controls:"",interval:4e3},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},t._l(t.event.picture.gallery,function(e){return s("b-carousel-slide",{key:t.event._id+"_picture_"+e,attrs:{"img-src":e}})}))],1):t._e(),s("div",{staticClass:"mt-5"},[s("TitleAtlas",[t._v("\n\t\t\t\tDiscussões\n\t\t\t\t"),s("button",{staticClass:"btn btn-atlas2",on:{click:function(e){t.btnCreateDiscussionClicked()}}},[s("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t.event.discussions.length?[t._l(t.getDiscussionsSelectedPage,function(t){return s("EventDiscussion",{key:t.id,staticClass:"mb-1",attrs:{discussion:t}})}),t.event.discussions.length>t.discussionsPerPage?s("div",{staticClass:"mt-3"},[s("vs-pagination",{attrs:{total:t.totalPages},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()]:s("p",[t._v("Este evento ainda não possui nenhuma discussão.")])],2),s("div",{staticClass:"mt-5"},[s("TitleAtlas",[t._v("Eventos relacionados")]),t.windowWidth>=768?t._l(t.related,function(t){return s("EventListItem",{key:"relatedEvent_"+t._id,staticClass:"mb-1",attrs:{event:t}})}):t._l(t.related,function(t){return s("EventCard",{key:"relatedEvent_"+t._id,staticClass:"mb-1",attrs:{event:t}})})],2),s("b-modal",{attrs:{title:"Utilizadores inscritos - "+t.event.enrollments.length,"header-bg-variant":"atlas1","header-text-variant":"white",centered:!0,"hide-footer":!0},on:{hidden:function(e){t.enrollmentsFilter=""}},model:{value:t.modalEnrollments,callback:function(e){t.modalEnrollments=e},expression:"modalEnrollments"}},[s("b-form-input",{attrs:{id:"enrollmentsFilter",placeholder:"Filtrar por utilizador...",type:"text"},model:{value:t.enrollmentsFilter,callback:function(e){t.enrollmentsFilter=e},expression:"enrollmentsFilter"}}),s("hr"),t._l(t.getFilteredEnrollments,function(e,i){return s("div",{key:"enrollment_"+e.user._id},[s("div",{staticClass:"text-center"},[s("router-link",{staticClass:"text-atlas2 ml-2",attrs:{to:{name:"profile",params:{username:e.user.username}}}},[s("img",{staticClass:"rounded-circle img-thumbnail img-fluid",staticStyle:{height:"100px",width:"100px"},attrs:{src:e.user.picture,alt:""}})]),t.windowWidth<520?s("br"):t._e(),s("router-link",{staticClass:"text-atlas2 ml-2",attrs:{to:{name:"profile",params:{username:e.user.username}}}},[t._v("@"+t._s(e.user.username))]),t._v("\n\t\t\t\t\t/ "+t._s(t.$moment(e.createdAt).format("LLL"))+"\n\t\t\t\t")],1),t.btnConditions()?[s("div",{staticClass:"row mt-2"},[t.event.paid?s("button",{staticClass:"btn btn-atlas2 col-12 col-sm-6 ml-auto",on:{click:function(t){e.paid?e.paid=!1:e.paid=!0}}},[s("i",{staticClass:"fa",class:e.paid?"fa-times":"fa-check",attrs:{"aria-hidden":"true"}}),t._v("\n\t\t\t\t\t\t\t"+t._s(e.paid?"Remover pagamento":"Validar pagamento")+"\n\t\t\t\t\t\t")]):t._e(),s("button",{staticClass:"btn btn-danger",class:t.event.paid?"col-12 col-sm-6 mr-auto":"col-6 ml-auto mr-3",attrs:{disabled:e.paid},on:{click:function(s){t.btnRemoveEnrollmentClicked(e.userId)}}},[s("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}}),t._v(" Remover inscrição\n\t\t\t\t\t\t")])])]:t._e(),i!==t.event.enrollments.length-1?s("hr"):t._e()],2)})],2),s("b-modal",{attrs:{title:"Adicionar discussão","header-bg-variant":"atlas1","header-text-variant":"white",centered:!0,"hide-footer":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("FormDiscussion",{attrs:{eventId:this.event.id}})],1),s("b-modal",{attrs:{title:"Editar evento","header-bg-variant":"atlas1","header-text-variant":"white",centered:!0,"hide-footer":!0},model:{value:t.modalEdit,callback:function(e){t.modalEdit=e},expression:"modalEdit"}},[s("FormEvent",{attrs:{edit:t.event}})],1)],1)])},a=[],n=(s("a481"),s("96cf"),s("1da1")),o=(s("6762"),s("2fdb"),s("55dd"),s("be94")),r=(s("7f7f"),s("fc6e")),l=s("7ec7"),c=s.n(l),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-atlas2 p-2 text-white"},[s("div",{staticClass:"row px-3"},[s("div",{staticClass:"mr-3"},[s("i",{staticClass:"fa fa-arrow-up text-atlas1 upvoteButton",attrs:{"aria-hidden":"true"},on:{click:t.buttonUpvoteClicked}}),s("br"),t._v("\n\t\t\t"+t._s(t.discussion.upvotes-t.discussion.downvotes)+"\n\t\t\t"),s("br"),s("i",{staticClass:"fa fa-arrow-down text-atlas1 downvoteButton",attrs:{"aria-hidden":"true"},on:{click:t.buttonDownvoteClicked}})]),s("div",[s("div",[s("router-link",{staticClass:"text-white",attrs:{to:{name:"eventDiscussion",params:{id:t.$route.params.id,discussionId:t.discussion._id}}}},[s("b",{staticClass:"text-atlas3",class:"Anúncio"===t.discussion.category?"bg-atlas1 p-1 rounded":""},[t._v("["+t._s(t.discussion.category)+"]")]),t._v("\n\t\t\t\t\t"+t._s(t.discussion.title)+"\n\t\t\t\t")])],1),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"ml-3"},[s("router-link",{staticClass:"text-white",attrs:{to:{name:"profile",params:{username:t.discussion.author.username}}}},[s("i",{staticClass:"fa fa-user text-atlas1",attrs:{"aria-hidden":"true"}}),s("small",[t._v(" @"+t._s(t.discussion.author.username))])])],1),s("div",{staticClass:"ml-3"},[s("i",{staticClass:"fa fa-comments text-atlas1",attrs:{"aria-hidden":"true"}}),s("small",[t._v(" "+t._s(t.discussion.answers)+" "+t._s(1===t.discussion.answers?"resposta":"respostas"))])]),s("div",{staticClass:"ml-3"},[s("i",{staticClass:"fa fa-calendar-alt text-atlas1",attrs:{"aria-hidden":"true"}}),s("small",[t._v(" "+t._s(t.$moment(t.discussion.createdAt).format("LL")))])]),s("div",{staticClass:"ml-3"},[s("i",{staticClass:"fa fa-clock text-atlas1",attrs:{"aria-hidden":"true"}}),s("small",[t._v(" "+t._s(t.$moment(t.discussion.createdAt).format("HH:mm")))])])])])])])},u=[],m=s("2f62"),v={props:["discussion"],data:function(){return{mouseOverUpvote:!1}},methods:Object(o["a"])({},Object(m["b"])(["upvoteEventDiscussionByEventIdDiscussionId","downvoteEventDiscussionByEventIdDiscussionId"]),{buttonUpvoteClicked:function(){-1!==this.getLoggedUserId?this.userAlreadyVoted?this.$snotify.error("Já votou nessa discussão","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}):this.upvoteEventDiscussionByEventIdDiscussionId({eventId:parseInt(this.$route.params.id),discussionId:this.discussion.id}):this.$snotify.error("Faça login para votar","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},buttonDownvoteClicked:function(){-1!==this.getLoggedUserId?this.userAlreadyVoted?this.$snotify.error("Já votou nessa discussão","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}):this.downvoteEventDiscussionByEventIdDiscussionId({eventId:parseInt(this.$route.params.id),discussionId:this.discussion.id}):this.$snotify.error("Faça login para votar","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}}),computed:Object(o["a"])({},Object(m["c"])(["getEventDiscussionsById","getLoggedUserId","getUserById","getEventUrlByName"]),{userAlreadyVoted:function(){var t=this;return this.discussion.usersVoted.some(function(e){return e===t.getLoggedUserId})}})},h=v,g=(s("32e6"),s("2877")),p=Object(g["a"])(h,d,u,!1,null,null,null),f=p.exports,b=s("a09f"),C=s("9f23"),_=s("d85a"),x=s("a69d"),E={name:"EventInfoView",components:{TitleAtlas:r["a"],Carousel:c.a,EventDiscussion:f,FormDiscussion:b["a"],FormEvent:C["a"],EventListItem:_["a"],EventCard:x["a"]},watch:{$route:function(){this.loadPage()}},beforeRouteUpdate:function(t,e,s){"eventsInfo"===t.name&&"sim"===t.query.inscrever&&this.enroll(),s()},created:function(){var t=this;this.loadPage(),"eventsInfo"===this.$route.name&&"sim"===this.$route.query.inscrever&&(this.$moment(this.event.dateEnd+" "+this.event.hourEnd).isSameOrAfter(this.$moment().format("YYYY-MM-DD HH:mm"))?this.event.enrollments.some(function(e){return e.userId===t.getLoggedUserId})?this.$vs.dialog({type:"confirm",color:"primary",title:"Já se encontra inscrito",acceptText:"Entendido",cancelText:"",text:"Já efetuou inscrição no evento ".concat(this.event.name,".")}):this.enroll():this.$vs.dialog({type:"confirm",color:"danger",title:"Inscrições fechadas",acceptText:"Entendido",cancelText:"",text:"Este evento já ocorreu, portanto tem as inscrições fechadas."})),this.$store.subscribe(function(e){"EDIT_EVENT_BY_ID"===e.type&&(t.modalEdit=!1),"CREATE_EVENT_DISCUSSION"===e.type&&(t.modal=!1)}),window.addEventListener("resize",this.handleResize),this.handleResize()},data:function(){return{event:[],related:[],modalEdit:!1,slide:0,modalEnrollments:!1,enrollmentsFilter:"",modal:!1,currentPage:1,discussionsPerPage:5,windowWidth:0,loading:!1}},computed:Object(o["a"])({},Object(m["c"])(["getEventById","getLoggedUser"]),{totalPages:function(){return this.event.discussions.length<=this.discussionsPerPage?1:Math.floor(this.event.discussions.length/this.discussionsPerPage)+1},getDiscussionsByPopularity:function(){return this.event.discussions.sort(function(t,e){return t.upvotes-t.downvotes<e.upvotes-e.downvotes?1:t.upvotes-t.downvotes>e.upvotes-e.downvotes?-1:0})},getDiscussionsSelectedPage:function(){return this.event.discussions.sort(function(t,e){return t.upvotes-t.downvotes<e.upvotes-e.downvotes?1:t.upvotes-t.downvotes>e.upvotes-e.downvotes?-1:0}),this.event.discussions.length>this.discussionsPerPage?this.event.discussions.slice((this.currentPage-1)*this.discussionsPerPage,this.discussionsPerPage*this.currentPage):this.event.discussions},getFilteredEnrollments:function(){var t=this;return this.enrollmentsFilter?this.event.enrollments.filter(function(e){return e.user.username.toLowerCase().includes(t.enrollmentsFilter.toLowerCase())}):this.event.enrollments}}),methods:{loadPage:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.id,this.loading=!0,t.prev=2,t.next=5,this.$http.get("/events/ids/".concat(e));case 5:s=t.sent,200===s.status&&(this.event=s.data.content.event,this.related=s.data.content.related,this.loading=!1),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(){return t.apply(this,arguments)}return e}(),handleResize:function(){this.windowWidth=window.innerWidth},btnCreateDiscussionClicked:function(){this.getLoggedUser.username?this.modal=!0:(this.$store.commit("REDIRECT_AFTER_LOGIN",this.$route.path),this.$router.push({name:"login"}))},btnConditions:function(){return!(!this.getLoggedUser.username||this.getLoggedUser._id!==this.event.author._id&&3!==this.getLoggedUser.profileId)},btnRemoveClicked:function(){var t=this;this.$vs.dialog({type:"confirm",color:"danger",title:"Remover evento?",acceptText:"Remover",cancelText:"Cancelar",text:"Este evento e todos os dados a este associado serão removidos para sempre.",accept:function(){t.$store.dispatch("removeEventById",t.event.id),t.$snotify.success("Evento removido","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),t.$router.replace({name:"events"})}})},btnEnrollmentClicked:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.getLoggedUser.username){t.next=5;break}this.$store.commit("REDIRECT_AFTER_LOGIN",this.$route.path),this.$router.push({name:"login"}),t.next=23;break;case 5:if(this.event.enrollments.some(function(t){return t.user._id===e.getLoggedUser._id})){t.next=20;break}return t.prev=6,t.next=9,this.$http.post();case 9:t.sent,t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](6);case 14:this.$store.dispatch("addEventEnrollmentByEventId",{eventId:this.event.id,enrollment:{userId:this.getLoggedUserId,moment:this.$moment(),paid:!1}}),this.assignMedals(),this.historyUpdate("ADD"),this.event.paid?this.$vs.dialog({type:"confirm",color:"primary",title:"Efetuar pagamento",acceptText:"Entendido",cancelText:"",text:"Dirija-se junto ao proponente de evento para efetuar o pagamento da inscrição (".concat(this.event.paymentPrice," €)."),accept:function(){e.$snotify.success("Inscrição efetuada","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},cancel:function(){e.$snotify.success("Inscrição efetuada","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}}):this.$vs.dialog({type:"confirm",color:"primary",title:"Inscrição efetuada",acceptText:"Entendido",cancelText:"",text:"A sua inscrição no evento ".concat(this.event.name," foi efetuada com sucesso.")}),t.next=23;break;case 20:this.$store.dispatch("removeEventEnrollmentByEventIdUserId",{eventId:this.event.id,userId:this.getLoggedUserId}),this.historyUpdate("REMOVE"),this.$vs.dialog({type:"confirm",color:"primary",title:"Inscrição removida",acceptText:"Entendido",cancelText:"",text:"A sua inscrição no evento ".concat(this.event.name," foi removida com sucesso.")});case 23:case"end":return t.stop()}},t,this,[[6,12]])}));function e(){return t.apply(this,arguments)}return e}(),assignMedals:function(){this.$store.dispatch("assignMedals",{userId:this.getLoggedUserId,type:"EVENT"});var t=this.getUserById(this.getLoggedUserId).medals,e=t.splice(t.length,1);console.log(e)},historyUpdate:function(t){"ADD"===t&&this.$store.dispatch("historyUpdate",{type:"ADD",userId:this.getLoggedUserId,eventId:this.event.id}),"REMOVE"===t&&this.$store.dispatch("historyUpdate",{type:"REMOVE",userId:this.getLoggedUserId,eventId:this.event.id})},btnValidatePaymentClicked:function(t){},btnRemoveEnrollmentClicked:function(t){this.$store.dispatch("removeEventEnrollmentByEventIdUserId",{eventId:this.event.id,userId:t}),this.$snotify.success("Inscrição removida","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}}},I=E,y=(s("ad08"),Object(g["a"])(I,i,a,!1,null,null,null));e["default"]=y.exports},a09f:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-form",{on:{submit:function(e){e.preventDefault(),t.edit?t.editDiscussion():t.createDiscussion()}}},[s("b-form-group",{attrs:{label:"Título","label-for":"name",state:t.titleState,"invalid-feedback":t.titleInvalidFeedback}},[s("b-form-input",{attrs:{id:"name",type:"text",maxlength:"50",state:t.titleState},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),s("b-form-group",{attrs:{label:"Categoria"}},[s("b-form-radio-group",{attrs:{buttons:"","button-variant":"outline-atlas2",options:t.categories,name:"categories"},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}})],1),s("b-form-group",{attrs:{label:"Texto","label-for":"text",state:t.textState,"invalid-feedback":t.textInvalidFeedback}},[s("b-form-textarea",{attrs:{id:"text",rows:3,"max-rows":6,state:t.textState},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),s("button",{staticClass:"btn btn-atlas1 col-12",attrs:{type:"submit"}},[t._v(t._s(t.edit?"Editar discussão":"Criar discussão"))])],1)},a=[],n=s("be94"),o=s("2f62"),r={props:["eventId","edit"],created:function(){this.edit&&(this.title=this.edit.title,this.selectedCategory=this.edit.category,this.text=this.edit.content),-1!==this.getLoggedUserId&&(this.getLoggedUserId!==this.getEventById(this.eventId).authorId&&3!==this.getUserById(this.getLoggedUserId).profileId||this.categories.push("Anúncio"))},data:function(){return{attemptSubmit:!1,title:"",categories:["Dúvida","Sugestão"],selectedCategory:"Dúvida",text:""}},methods:{createDiscussion:function(){this.attemptSubmit=!0,this.titleState&&this.textState?(this.$store.dispatch("createEventDiscussion",{eventId:this.eventId,discussion:{id:this.getLastDiscussionIdByEventId(this.eventId)+1,authorId:this.getLoggedUserId,title:this.title,category:this.selectedCategory,content:this.text,upvotes:0,downvotes:0,usersVoted:[],moment:this.$moment(),answers:[]}}),this.$snotify.success("Discussão criada","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),this.resetFormCreateDiscussion()):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},editDiscussion:function(){this.attemptSubmit=!0,this.titleState&&this.textState?(this.$store.dispatch("editEventDiscussionByEventIdDiscussionId",{eventId:this.eventId,discussionId:this.edit.id,discussion:{title:this.title,category:this.selectedCategory,content:this.text}}),this.$snotify.success("Discussão editada","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},resetFormCreateDiscussion:function(){this.attemptSubmit=!1,this.title="",this.selectedCategory="Dúvida",this.text=""}},computed:Object(n["a"])({},Object(o["c"])(["getLastDiscussionIdByEventId","getLoggedUserId","getEventById","getUserById"]),{titleState:function(){return this.title||this.attemptSubmit?!(!this.title&&this.attemptSubmit):null},titleInvalidFeedback:function(){return!this.title&&this.attemptSubmit?"Introduza o título":null},textState:function(){return this.text||this.attemptSubmit?!(!this.text&&this.attemptSubmit):null},textInvalidFeedback:function(){return!this.text&&this.attemptSubmit?"Introduza o texto":null}})},l=r,c=s("2877"),d=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=d.exports},ad08:function(t,e,s){"use strict";var i=s("b083"),a=s.n(i);a.a},b083:function(t,e,s){},dcb3:function(t,e,s){}}]);
//# sourceMappingURL=chunk-cc4fa7e0.7fc5743d.js.map