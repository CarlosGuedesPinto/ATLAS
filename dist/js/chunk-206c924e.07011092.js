(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-206c924e"],{"2fdb":function(t,e,a){"use strict";var i=a("5ca1"),s=a("d2c8"),o="includes";i(i.P+i.F*a("5147")(o),"String",{includes:function(t){return!!~s(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,a){var i=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,!"/./"[t](e)}catch(s){}}return!0}},6762:function(t,e,a){"use strict";var i=a("5ca1"),s=a("c366")(!0);i(i.P,"Array",{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"9f23":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form",{on:{submit:function(e){e.preventDefault(),t.edit?t.editEvent():t.addEvent()}}},[a("b-form-group",{class:t.edit?"":"mt-4",attrs:{label:"Nome","label-for":"name","invalid-feedback":t.nameInvalidFeedback,"valid-feedback":t.nameValidFeedback,state:t.nameState}},[a("b-form-input",{attrs:{id:"name",state:t.nameState,type:"text",maxlength:"50"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Categoria"}},[a("b-form-radio-group",{attrs:{buttons:"","button-variant":"outline-atlas2",options:t.categories,name:"categories",stacked:t.windowWidth<1e3},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}})],1),a("b-form-group",{attrs:{label:"Tags",state:t.tagsState,"invalid-feedback":t.tagsInvalidFeedback}},[a("b-form-input",{attrs:{id:"filterTag",type:"text",maxlength:"50",placeholder:"Filtrar tags..."},model:{value:t.filterTag,callback:function(e){t.filterTag=e},expression:"filterTag"}}),a("b-form-checkbox-group",{staticClass:"mt-2 px-1",staticStyle:{"overflow-y":"scroll","max-height":"200px"},attrs:{name:"tags",options:t.filteredTags,stacked:!0,state:t.tagsState},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}})],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Descrição"}},[a("b-form-textarea",{attrs:{id:"description",state:t.descriptionState,rows:3,maxlength:"500"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),a("small",[t._v("Máximo 500 caracteres")])],1),a("b-form-group",{attrs:{label:"Hora de início","label-for":"hourStart",state:t.hourStartState,"invalid-feedback":t.hourStartInvalidFeedback}},[a("b-form-input",{attrs:{id:"hourStart",state:t.hourStartState,type:"time"},model:{value:t.hourStart,callback:function(e){t.hourStart=e},expression:"hourStart"}})],1),a("b-form-group",{attrs:{label:"Hora de fim","label-for":"hourEnd",state:t.hourEndState,"invalid-feedback":t.hourEndInvalidFeedback}},[a("b-form-input",{attrs:{id:"hourEnd",state:t.hourEndState,type:"time"},model:{value:t.hourEnd,callback:function(e){t.hourEnd=e},expression:"hourEnd"}})],1),a("b-form-group",{attrs:{label:"Data de início","label-for":"dateStart","invalid-feedback":t.dateStartInvalidFeedback,state:t.dateStartState}},[a("b-form-input",{attrs:{id:"dateStart",state:t.dateStartState,type:"date",min:t.getTodays()},model:{value:t.dateStart,callback:function(e){t.dateStart=e},expression:"dateStart"}})],1),t.dateStart?a("b-form-group",{attrs:{label:"Duração (dias)"}},[a("button",{staticClass:"btn btn-atlas2",attrs:{disabled:1===t.duration},on:{click:function(e){e.preventDefault(),t.duration--}}},[t._v("-")]),a("span",{staticClass:"mx-3"},[t._v(t._s(t.duration))]),a("button",{staticClass:"btn btn-atlas2",attrs:{disabled:11===t.duration},on:{click:function(e){e.preventDefault(),t.duration++}}},[t._v("+")])]):t._e(),a("transition",{attrs:{name:"fade"}},[t.duration>1?a("b-form-group",{attrs:{label:"Data de fim","label-for":"dateEnd",state:t.dateStartState}},[a("b-form-input",{attrs:{id:"dateEnd",state:t.dateStartState,type:"date",disabled:!0,value:t.dateEnd}})],1):t._e()],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Evento pago?"}},[a("b-form-radio-group",{attrs:{buttons:"","button-variant":"outline-atlas2",options:t.optionsPayment,name:"payment"},model:{value:t.selectedPayment,callback:function(e){t.selectedPayment=e},expression:"selectedPayment"}})],1),a("transition",{attrs:{name:"fade"}},[t.selectedPayment?a("b-form-group",{attrs:{label:"Preço de inscrição (€)","label-for":"price",state:t.priceState,"invalid-feedback":t.priceInvalidFeedback}},[a("b-form-input",{attrs:{id:"price",state:t.priceState,type:"number"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1):t._e()],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Sala",state:t.classroomState,"invalid-feedback":t.classroomInvalidFeedback}},[a("b-form-select",{attrs:{state:t.classroomState},model:{value:t.classroom,callback:function(e){t.classroom=e},expression:"classroom"}},[a("option",{domProps:{value:null}},[t._v("Selecione uma sala")]),a("option",{attrs:{value:"Associação de Estudantes"}},[t._v("Associação de Estudantes")]),a("option",{attrs:{value:"Auditório"}},[t._v("Auditório")]),a("optgroup",{attrs:{label:"Piso 0"}},[a("option",{attrs:{value:"Anfiteatro Joaquim Ribeiro"}},[t._v("Anfiteatro Joaquim Ribeiro")]),a("option",{attrs:{value:"B102"}},[t._v("B102")]),a("option",{attrs:{value:"B103A"}},[t._v("B103A")]),a("option",{attrs:{value:"B103B"}},[t._v("B103B")]),a("option",{attrs:{value:"B104"}},[t._v("B104")]),a("option",{attrs:{value:"B105"}},[t._v("B105")]),a("option",{attrs:{value:"B106"}},[t._v("B106")]),a("option",{attrs:{value:"B107"}},[t._v("B107")]),a("option",{attrs:{value:"B108"}},[t._v("B108")]),a("option",{attrs:{value:"B109"}},[t._v("B109")]),a("option",{attrs:{value:"B110"}},[t._v("B110")]),a("option",{attrs:{value:"B111"}},[t._v("B111")]),a("option",{attrs:{value:"B112"}},[t._v("B112")])]),a("optgroup",{attrs:{label:"Piso 1"}},[a("option",{attrs:{value:"B201"}},[t._v("B201")]),a("option",{attrs:{value:"B202"}},[t._v("B202")]),a("option",{attrs:{value:"B203"}},[t._v("B203")]),a("option",{attrs:{value:"B204"}},[t._v("B204")]),a("option",{attrs:{value:"B205"}},[t._v("B205")]),a("option",{attrs:{value:"B206"}},[t._v("B206")]),a("option",{attrs:{value:"B207"}},[t._v("B207")]),a("option",{attrs:{value:"B208"}},[t._v("B208")]),a("option",{attrs:{value:"B209"}},[t._v("B209")]),a("option",{attrs:{value:"B210"}},[t._v("B210")]),a("option",{attrs:{value:"B211"}},[t._v("B211")]),a("option",{attrs:{value:"B212"}},[t._v("B212")])]),a("optgroup",{attrs:{label:"Piso 2"}},[a("option",{attrs:{value:"B301"}},[t._v("B301")]),a("option",{attrs:{value:"B302"}},[t._v("B302")]),a("option",{attrs:{value:"B303"}},[t._v("B303")]),a("option",{attrs:{value:"B304"}},[t._v("B304")]),a("option",{attrs:{value:"B305"}},[t._v("B305")]),a("option",{attrs:{value:"B306"}},[t._v("B306")]),a("option",{attrs:{value:"B307"}},[t._v("B307")]),a("option",{attrs:{value:"B308"}},[t._v("B308")]),a("option",{attrs:{value:"B309"}},[t._v("B309")]),a("option",{attrs:{value:"B310"}},[t._v("B310")]),a("option",{attrs:{value:"B311"}},[t._v("B311")]),a("option",{attrs:{value:"B312"}},[t._v("B312")])])])],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Cursos",state:t.coursesState,"invalid-feedback":t.coursesInvalidFeedback}},[a("b-form-checkbox-group",{staticClass:"mt-2 px-1",attrs:{name:"courses",options:t.courses,stacked:!0,state:t.coursesState},model:{value:t.selectedCourses,callback:function(e){t.selectedCourses=e},expression:"selectedCourses"}})],1),a("hr",{staticClass:"mt-4"}),a("b-form-group",{staticClass:"mt-4",attrs:{label:"URL miniatura (proporção 16:9)","label-for":"thumbnail","invalid-feedback":t.thumbnailInvalidFeedback,state:t.thumbnailState}},[a("b-form-input",{attrs:{id:"thumbnail",state:t.thumbnailState,type:"url"},model:{value:t.thumbnail,callback:function(e){t.thumbnail=e},expression:"thumbnail"}}),a("small",[t._v("Imagem que aparecerá no card do evento. É mandatório que a proporção seja 16:9.")])],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"URL poster","label-for":"poster","invalid-feedback":t.posterInvalidFeedback,state:t.posterState}},[a("b-form-input",{attrs:{id:"poster",state:t.posterState,type:"url"},model:{value:t.poster,callback:function(e){t.poster=e},expression:"poster"}})],1),a("transition",{attrs:{name:"fade",mode:"in-out"}},[t.poster?a("b-form-group",{staticClass:"mt-4",attrs:{label:"Orientação do poster"}},[a("b-form-radio-group",{attrs:{buttons:"","button-variant":"outline-atlas2",options:["Vertical","Horizontal"],name:"posterOrientation"},model:{value:t.posterOrientation,callback:function(e){t.posterOrientation=e},expression:"posterOrientation"}})],1):t._e()],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Galeria de fotos?"}},[a("b-form-radio-group",{attrs:{buttons:"","button-variant":"outline-atlas2",options:t.optionsGallery,name:"gallery"},model:{value:t.selectedGallery,callback:function(e){t.selectedGallery=e},expression:"selectedGallery"}})],1),a("transition-group",{attrs:{name:"fade",mode:"in-out"}},[t.selectedGallery?a("b-form-group",{key:"transition1",attrs:{label:"Quantidade de fotos"}},[a("button",{staticClass:"btn btn-atlas2",attrs:{disabled:2===t.photoQuantity},on:{click:function(e){e.preventDefault(),t.decreasePhotoQuantity()}}},[t._v("-")]),a("span",{staticClass:"mx-3"},[t._v(t._s(t.photoQuantity))]),a("button",{staticClass:"btn btn-atlas2",on:{click:function(e){e.preventDefault(),t.increasePhotoQuantity()}}},[t._v("+")])]):t._e(),t.selectedGallery?a("b-card",{key:"transition2"},t._l(t.photoQuantity,function(e){return a("b-form-group",{key:e,attrs:{label:"URL foto "+e,"label-for":"name",state:t.galleryState,"invalid-feedback":t.galleryInvalidFeedback}},[a("b-form-input",{attrs:{id:"name",type:"url",state:t.galleryState},model:{value:t.photos[e-1],callback:function(a){t.$set(t.photos,e-1,a)},expression:"photos[photoInput - 1]"}})],1)})):t._e()],1),a("button",{staticClass:"btn btn-atlas1 col-12 mt-2",attrs:{type:"submit"}},[t._v(t._s(t.edit?"Editar evento":"Adicionar evento"))])],1),a("vue-snotify")],1)},s=[],o=(a("6762"),a("2fdb"),a("be94")),r=(a("ac6a"),a("7f7f"),a("2f62")),n={props:["edit"],watch:{edit:function(t,e){this.name=t.name,this.selectedCategory=t.category,this.selectedTags=t.tags,this.description=t.description,this.hourStart=t.hourStart,this.hourEnd=t.hourEnd,this.duration=t.durationDays,this.dateStart=t.dateStart,this.selectedPayment=t.paid,this.price=t.paymentPrice,this.classroom=t.classroom,this.selectedCourses=t.coursesIds,this.thumbnail=t.picture.thumbnail,this.poster=t.picture.poster.url,this.posterOrientation=t.picture.poster.orientation,this.selectedGallery=t.picture.gallery.length>0,this.photoQuantity=t.picture.gallery.length,this.photos=t.picture.gallery.length?t.picture.gallery:["",""]}},data:function(){return{name:"",selectedCategory:"Evento",categories:["Evento","Seminário","Workshop","Conferência","Meeting","Exposição"],selectedTags:[],tags:[],filterTag:"",description:"",hourStart:"",hourEnd:"",duration:1,dateStart:"",selectedPayment:!1,optionsPayment:[{text:"Não",value:!1},{text:"Sim",value:!0}],price:0,classroom:null,courses:[],selectedCourses:[],thumbnail:"",poster:"",posterOrientation:"Vertical",selectedGallery:!1,optionsGallery:[{text:"Não",value:!1},{text:"Sim",value:!0}],photoQuantity:2,photos:["",""],attemptSubmit:!1,windowWidth:0}},created:function(){var t=this;console.log(this.edit),window.addEventListener("resize",this.handleResize),this.handleResize(),this.getTags.forEach(function(e){t.tags.push({text:e.name,value:e.id})}),this.getCourses.forEach(function(e){t.courses.push({text:e.name,value:e.id})}),this.edit&&(this.name=this.edit.name,this.selectedCategory=this.edit.category,this.selectedTags=this.edit.tags,this.description=this.edit.description,this.hourStart=this.edit.hourStart,this.hourEnd=this.edit.hourEnd,this.duration=this.edit.durationDays,this.dateStart=this.edit.dateStart,this.selectedPayment=this.edit.paid,this.price=this.edit.paymentPrice,this.classroom=this.edit.classroom,this.selectedCourses=this.edit.coursesIds,this.thumbnail=this.edit.picture.thumbnail,this.poster=this.edit.picture.poster.url,this.posterOrientation=this.edit.picture.poster.orientation,this.selectedGallery=this.edit.picture.gallery.length>0,this.photoQuantity=this.edit.picture.gallery.length,this.photos=this.edit.picture.gallery.length?this.edit.picture.gallery:["",""])},methods:{handleResize:function(){this.windowWidth=window.innerWidth},getTodays:function(){return new Date},addEvent:function(){if(this.attemptSubmit=!0,this.nameState&&this.tagsState&&this.descriptionState&&this.dateStartState&&this.hourStartState&&this.hourEndState&&(!this.selectedPayment||this.selectedPayment&&this.priceState)&&this.classroomState&&this.coursesState&&this.thumbnailState&&this.posterState&&this.galleryState){this.selectedGallery||(this.photos=[]);var t={id:this.getLastEventId+1,authorId:this.getLoggedUserId,name:this.name,category:this.selectedCategory,tags:this.selectedTags,description:this.description,classroom:this.classroom,coursesIds:this.selectedCourses,hourStart:this.hourStart,hourEnd:this.hourEnd,dateStart:this.dateStart,durationDays:this.duration,dateEnd:this.dateEnd,paymentPrice:this.price,picture:{thumbnail:this.thumbnail,poster:{orientation:this.posterOrientation,url:this.poster},gallery:this.photos},discussions:[],enrollments:[]};this.$store.dispatch("addEvent",t);var e={eventId:t.id,event:this.getEventById(t.id),tags:t.tags,authorId:t.authorId,courses:t.coursesIds,moment:this.$moment()};this.$store.dispatch("insertNewNotifications",e),this.clearForm(),this.$snotify.success("Evento adicionado","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}else this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},editEvent:function(){this.attemptSubmit=!0,this.nameState&&this.tagsState&&this.descriptionState&&this.dateStartState&&this.hourStartState&&this.hourEndState&&(!this.selectedPayment||this.selectedPayment&&this.priceState)&&this.classroomState&&this.coursesState&&this.thumbnailState&&this.posterState&&this.galleryState?(this.selectedGallery||(this.photos=[]),this.$store.dispatch("editEventById",{id:this.edit.id,event:{name:this.name,category:this.selectedCategory,tags:this.selectedTags,description:this.description,classroom:this.classroom,coursesIds:this.selectedCourses,hourStart:this.hourStart,hourEnd:this.hourEnd,dateStart:this.dateStart,durationDays:this.duration,dateEnd:this.dateEnd,paymentPrice:this.price,picture:{thumbnail:this.thumbnail,poster:{orientation:this.posterOrientation,url:this.poster},gallery:this.photos}}}),this.$snotify.success("Evento editado","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},decreasePhotoQuantity:function(){this.photos.pop(),this.photoQuantity--},increasePhotoQuantity:function(){this.photos.push(""),this.photoQuantity++},clearForm:function(){this.name="",this.selectedCategory="",this.selectedTags=[],this.filterTag="",this.description="",this.hourStart="",this.hourEnd="",this.dateStart="",this.duration=1,this.selectedPayment=!1,this.price=0,this.classroom=null,this.selectedCourses=[],this.thumbnail="",this.poster="",this.posterOrientation="Vertical",this.selectedGallery=!1,this.photoQuantity=2,this.photos=["",""],this.attemptSubmit=!1}},computed:Object(o["a"])({},Object(r["c"])(["getLoggedUserId","getLastEventId","getTags","getCourses","getEventById"]),{nameState:function(){return this.name||this.attemptSubmit?!(!this.name&&this.attemptSubmit):null},nameInvalidFeedback:function(){return!this.name&&this.attemptSubmit?"Introduza o nome do curso":null},nameValidFeedback:function(){return 50===this.name.length?"Máximo 50 caracteres":null},filteredTags:function(){var t=this;return this.filterTag?this.tags.filter(function(e){return e.text.toLowerCase().includes(t.filterTag.toLowerCase())}):this.tags},tagsState:function(){return this.selectedTags.length||this.attemptSubmit?!(!this.selectedTags.length&&this.attemptSubmit):null},tagsInvalidFeedback:function(){return!this.selectedTags.length&&this.attemptSubmit?"Selecione pelo menos uma tag":null},descriptionState:function(){return this.description||this.attemptSubmit?!(!this.description&&this.attemptSubmit):null},durationState:function(){return!(!this.duration||this.duration>3)},durationInvalidFeedback:function(){return this.duration?this.duration>3?"Máximo 3 dias seguidos":null:"Insira a duração do evento"},hourStartState:function(){return this.hourStart||this.attemptSubmit?!(!this.hourStart&&this.attemptSubmit):null},hourStartInvalidFeedback:function(){return!this.hourStart&&this.attemptSubmit?"Introduza a hora de início":null},hourEndState:function(){return this.hourEnd||this.attemptSubmit?!(!this.hourEnd&&this.attemptSubmit):null},hourEndInvalidFeedback:function(){return!this.hourEnd&&this.attemptSubmit?"Introduza a hora de fim":null},dateStartState:function(){if(this.edit)return this.dateStart||this.attemptSubmit?!(!this.dateStart&&this.attemptSubmit):null;var t=new Date(this.dateStart);return t.setDate(t.getDate()+1),this.dateStart||this.attemptSubmit?!(!this.dateStart&&this.attemptSubmit)&&!(t<this.getTodays()):null},dateStartInvalidFeedback:function(){var t=new Date(this.dateStart);return t.setDate(t.getDate()+1),!this.dateStart&&this.attemptSubmit?"Insira a data de início do evento":t<this.getTodays()?"A data de início tem de ser igual ou superior à data atual":null},dateEnd:function(){if(this.dateStart){var t=new Date(this.dateStart);t.setDate(t.getDate()+this.duration-1);var e=t.getDate(),a=t.getMonth()+1,i=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),i+"-"+a+"-"+e}return""},priceState:function(){return this.price||this.attemptSubmit?!(!this.price&&this.attemptSubmit)&&!(this.price<1):null},priceInvalidFeedback:function(){return!this.price&&this.attemptSubmit?"Insira o preço de inscrição (€)":this.price<1?"O preço de inscrição (€) deve ser igual ou superior a 1":null},classroomState:function(){return this.classroom||this.attemptSubmit?!(!this.classroom&&this.attemptSubmit):null},classroomInvalidFeedback:function(){return!this.classroom&&this.attemptSubmit?"Selecione uma sala":null},coursesState:function(){return this.selectedCourses.length||this.attemptSubmit?!(!this.selectedCourses.length&&this.attemptSubmit):null},coursesInvalidFeedback:function(){return!this.selectedCourses.length&&this.attemptSubmit?"Selecione pelo menos um curso":null},thumbnailState:function(){return this.thumbnail||this.attemptSubmit?!(!this.thumbnail&&this.attemptSubmit):null},thumbnailInvalidFeedback:function(){return!this.thumbnail&&this.attemptSubmit?"Introduza o URL da miniatura":null},posterState:function(){return this.poster||this.attemptSubmit?!(!this.poster&&this.attemptSubmit):null},posterInvalidFeedback:function(){return!this.poster&&this.attemptSubmit?"Introduza o URL do poster":null},galleryState:function(){return this.photos.length||this.attemptSubmit?!(!this.photos.every(function(t){return t.length>0})&&!this.attemptSubmit):null},galleryInvalidFeedback:function(){return this.photos.every(function(t){return t.length>0})||this.attemptSubmit?null:"Introduza as fotografias"}})},l=n,u=a("2877"),d=Object(u["a"])(l,i,s,!1,null,null,null);e["a"]=d.exports},a481:function(t,e,a){a("214f")("replace",2,function(t,e,a){return[function(i,s){"use strict";var o=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,o,s):a.call(String(o),i,s)},a]})},d2c8:function(t,e,a){var i=a("aae3"),s=a("be13");t.exports=function(t,e,a){if(i(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(s(t))}}}]);