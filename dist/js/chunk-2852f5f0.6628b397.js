(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2852f5f0"],{"14dc":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form",{on:{submit:function(t){t.preventDefault(),e.edit?e.editTag():e.addTag()}}},[a("b-form-group",{class:e.editId?"":"mt-4",attrs:{label:"Tag","label-for":"name","invalid-feedback":e.nameInvalidFeedback,"valid-feedback":e.nameValidFeedback,state:e.nameState}},[a("b-form-input",{attrs:{id:"name",state:e.nameState,type:"text",maxlength:"15"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("button",{staticClass:"btn btn-atlas1 col-12 mt-2",attrs:{type:"submit"}},[e.loadingSubmit?[a("b-spinner",{attrs:{variant:"atlas",small:"",label:"A carregar..."}})]:[e._v(e._s(e.editId?"Editar tag":"Adicionar tag"))]],2)],1),a("vue-snotify")],1)},i=[],r=a("be94"),n=(a("96cf"),a("1da1")),o=(a("7f7f"),a("2f62")),c={props:["edit"],data:function(){return{name:"",loadingSubmit:!1,attemptSubmit:!1,errors:{name:{error:!1,value:""}}}},created:function(){this.edit&&(this.name=this.getTagById(this.editId).name)},methods:{addTag:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.attemptSubmit=!0,!this.nameState){e.next=16;break}return e.prev=2,e.next=5,this.$http.post("/tags",{name:this.name});case 5:e.sent,this.name="",this.attemptSubmit=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),t=e.t0.response.data,"name"===t.error.type&&(console.log(!0),this.errors.name.error=!0,this.errors.name.value=t.error.value,this.$snotify.error(t.message.pt,"",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}));case 14:e.next=17;break;case 16:this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});case 17:case"end":return e.stop()}},e,this,[[2,10]])}));function t(){return e.apply(this,arguments)}return t}(),editTag:function(){this.attemptSubmit=!0,this.nameState?(this.$store.dispatch("editTag",{id:this.editId,name:this.name}),this.name="",this.attemptSubmit=!1,this.$snotify.success("Tag editada","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}},computed:Object(r["a"])({},Object(o["c"])(["getTags","getTagById","getLastTagId","getTagByName"]),{nameState:function(){return this.name||this.attemptSubmit?!!(this.name&&this.name.trim()||!this.attemptSubmit)&&(!this.errors.name.error||this.name!==this.errors.name.value):null},nameInvalidFeedback:function(){return this.name&&this.name.trim()||!this.attemptSubmit?this.errors.name.error&&this.name===this.errors.name.value?"Tag em uso":null:"Introduza uma tag"},nameValidFeedback:function(){return 15===this.name.length?"Máximo 15 caracteres":null}})},u=c,l=a("2877"),m=Object(l["a"])(u,s,i,!1,null,null,null);t["a"]=m.exports},"1fdb":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[e.items.length>5?[a("div",{staticClass:"col-md-6 my-1"},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Filtrar"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Escreva para filtrar..."},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1),a("div",{staticClass:"col-md-6 my-1 mb-3"},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Por página"}},[a("b-form-select",{attrs:{options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)]:[a("div",{staticClass:"col-12 my-1"},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Filtrar"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Escreva para filtrar..."},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1)]],2),a("b-table",{attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection,outlined:"",hover:"",responsive:"","empty-filtered-text":"Não há resultados para a sua pesquisa"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},filtered:e.onFiltered,"row-clicked":function(t){e.rowClicked(t)}},scopedSlots:e._u([{key:"name",fn:function(t){return"users"===e.name?[e._v(e._s(t.item.firstName+" "+t.item.lastName))]:void 0}},{key:"username",fn:function(t){return"users"===e.name?[e._v(e._s("@"+t.item.username))]:void 0}},{key:"tagName",fn:function(t){return"tags"===e.name?[e._v(e._s("#"+t.item.name))]:void 0}},{key:"courseName",fn:function(t){return"courses"===e.name?[e._v(e._s(t.item.name))]:void 0}},{key:"courseAbbreviation",fn:function(t){return"courses"===e.name?[e._v(e._s(t.item.abbreviation))]:void 0}},{key:"author",fn:function(t){return"events"===e.name&&3===e.getUserById(e.getLoggedUserId).profileId?[e._v(e._s(e.getUserById(t.item.authorId).username+" ("+t.item.authorId+")"))]:void 0}},{key:"tags",fn:function(t){return"events"===e.name&&3===e.getUserById(e.getLoggedUserId).profileId?[e._l(t.item.tags,function(t){return[e._v(e._s("#"+e.getTagNameById(t)))]})]:void 0}},{key:"actions",fn:function(t){return"courses"===e.name||"tags"===e.name?[a("button",{staticClass:"btn btn-danger float-right",on:{click:function(a){a.preventDefault(),e.btnRemoveClicked(parseInt(t.item.id))}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("button",{staticClass:"btn btn-warning text-white mx-2 float-right",on:{click:function(a){a.preventDefault(),e.btnEditClicked(parseInt(t.item.id))}}},[a("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}})])]:void 0}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.items.length>e.perPage,expression:"items.length > perPage"}],staticClass:"row"},[a("div",{staticClass:"my-1 mr-auto ml-auto"},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),a("vs-prompt",{attrs:{"vs-title":"Editar curso","vs-active":e.activePrompt,"vs-buttons-hidden":!0},on:{"update:vsActive":function(t){e.activePrompt=t}}},["courses"===e.name?a("FormCourse",{attrs:{editId:e.editId}}):e._e(),"tags"===e.name?a("FormTag",{attrs:{editId:e.editId}}):e._e()],1)],1)},i=[],r=(a("7f7f"),a("be94")),n=a("2f62"),o=a("c398"),c=a("14dc"),u={components:{FormCourse:o["a"],FormTag:c["a"]},props:["name","items","fields"],data:function(){return{currentPage:1,perPage:20,totalRows:this.items.length,pageOptions:[20,35,50],sortBy:null,sortDesc:!1,sortDirection:"asc",filter:null,activePrompt:!1,editId:0}},created:function(){var e=this;this.$store.subscribe(function(t){"EDIT_COURSE"!==t.type&&"EDIT_TAG"!==t.type||(e.activePrompt=!1)})},computed:Object(r["a"])({},Object(n["c"])(["getCourseById","getTagById","getUserById","getLoggedUserId","getTagNameById"]),{sortOptions:function(){return this.fields.filter(function(e){return e.sortable}).map(function(e){return{text:e.label,value:e.key}})}}),methods:Object(r["a"])({},Object(n["b"])(["removeCourseById","removeTagById"]),{getNameUserType:function(e){switch(e){case 1:return"Aluno";case 2:return"Propon. evento.";case 3:return"Administrador"}},onFiltered:function(e){this.totalRows=e.length,this.currentPage=1},rowClicked:function(e){switch(this.name){case"users":this.$router.push({name:"profile",params:{username:e.username}});break;case"tags":this.$router.push({name:"events",query:{tags:this.getTagNameById(e.id)}});break;case"courses":this.$router.push({name:"events",query:{curso:this.getCourseById(e.id).name}});break;case"events":this.$router.push({name:"eventsInfo",params:{id:e.id}});break;default:break}},btnEditClicked:function(e){"courses"!==this.name&&"tags"!==this.name||(this.editId=e,this.activePrompt=!0)},btnRemoveClicked:function(e){var t=this;switch(this.name){case"courses":this.$vs.dialog({type:"confirm",color:"danger",title:"Remover curso?",acceptText:"Remover",cancelText:"Cancelar",text:"O curso ".concat(this.getCourseById(e).name," será removido para sempre."),accept:function(){t.removeCourseById(e),t.$snotify.success("Curso removido","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}});break;case"tags":this.$vs.dialog({type:"confirm",color:"danger",title:"Remover tag?",acceptText:"Remover",cancelText:"Cancelar",text:"A tag ".concat(this.getTagById(e).name," será removida para sempre."),accept:function(){t.removeTagById(e),t.$snotify.success("Tag removida","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}});break}}})},l=u,m=a("2877"),d=Object(m["a"])(l,s,i,!1,null,null,null);t["a"]=d.exports},"450a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-5"},[a("Panel",{attrs:{title:"Adicionar evento"}},[a("FormEvent")],1),a("Panel",{staticClass:"mt-5",attrs:{title:3===e.getUserById(e.getLoggedUserId).profileId?"Eventos - "+e.getEvents.length:"Meus eventos - "+e.getEventsByAuthorId(e.getLoggedUserId).length}},[a("DataTable",{attrs:{name:"events",items:3===e.getUserById(e.getLoggedUserId).profileId?e.getEvents:e.getEventsByAuthorId(e.getLoggedUserId),fields:e.eventsFields}})],1)],1)},i=[],r=a("be94"),n=(a("96cf"),a("1da1")),o=(a("cadf"),a("551c"),a("097d"),a("9c974")),c=a("9f23"),u=a("1fdb"),l=a("2f62"),m={components:{Panel:o["a"],FormEvent:c["a"],DataTable:u["a"]},created:function(){this.loadPage()},data:function(){return{loading:!1,events:[],eventsFields:[{key:"name",label:"Nome",sortable:!0,sortDirection:"desc"},{key:"category",label:"Categoria",sortable:!0},{key:"tags",label:"Tags",sortable:!0},{key:"dateStart",label:"Data de início",sortable:!0},{key:"dateEnd",label:"Data de fim",sortable:!0},{key:"actions",label:""}]}},methods:{loadPage:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$store.commit("RESET_STATE"),this.loading=!0,e.prev=2,2!==this.getLoggedUser.profileId){e.next=7;break}return e.next=6,this.$http.get("/events/authors/".concat(this.getLoggedUser._id));case 6:t=e.sent;case 7:if(3!==this.getLoggedUser.profileId){e.next=11;break}return e.next=10,this.$http.get("/events");case 10:t=e.sent;case 11:200===t.status&&(this.events=t.data,this.loading=!1),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),this.$router.push({name:"home"});case 17:case"end":return e.stop()}},e,this,[[2,14]])}));function t(){return e.apply(this,arguments)}return t}()},computed:Object(r["a"])({},Object(l["c"])(["getLoggedUser"]))},d=m,b=a("2877"),h=Object(b["a"])(d,s,i,!1,null,null,null);t["default"]=h.exports},"9c974":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border border-atlas rounded bg-white px-0"},[a("h4",{staticClass:"bg-atlas1 text-white pl-3 py-2 atlas-bold"},[e._v(e._s(e.title))]),a("div",{staticClass:"px-3 pb-4"},[e._t("default")],2)])},i=[],r={name:"Panel",props:["title"]},n=r,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,null,null);t["a"]=c.exports},c398:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form",{on:{submit:function(t){t.preventDefault(),e.editId?e.editCourse():e.addCourse()}}},[a("b-form-group",{class:e.editId?"":"mt-4",attrs:{label:"Nome","label-for":"name","invalid-feedback":e.nameInvalidFeedback,"valid-feedback":e.nameValidFeedback,state:e.nameState}},[a("b-form-input",{attrs:{id:"name",state:e.nameState,type:"text",maxlength:"50"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Abreviatura","label-for":"abbreviation","invalid-feedback":e.abbreviationInvalidFeedback,"valid-feedback":e.abbreviationValidFeedback,state:e.abbreviationState}},[a("b-form-input",{attrs:{id:"abbreviation",state:e.abbreviationState,type:"text",maxlength:"6"},model:{value:e.abbreviation,callback:function(t){e.abbreviation=t},expression:"abbreviation"}})],1),a("button",{staticClass:"btn btn-atlas1 col-12 mt-2",attrs:{type:"submit"}},[e._v(e._s(e.editId?"Editar curso":"Adicionar curso"))])],1),a("vue-snotify")],1)},i=[],r=(a("a481"),a("be94")),n=(a("7f7f"),a("2f62")),o={props:["editId"],data:function(){return{name:"",abbreviation:"",attemptSubmit:!1}},created:function(){if(this.editId){var e=this.getCourseById(this.editId);this.name=e.name,this.abbreviation=e.abbreviation}},methods:{addCourse:function(){this.attemptSubmit=!0,this.nameState&&this.abbreviationState?(this.$store.dispatch("addCourse",{id:this.getLastCourseId+1,name:this.name,abbreviation:this.abbreviation}),this.name="",this.abbreviation="",this.attemptSubmit=!1):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},editCourse:function(){this.attemptSubmit=!0,this.nameState&&this.abbreviationState?(this.$store.dispatch("editCourse",{id:this.editId,name:this.name,abbreviation:this.abbreviation}),this.name="",this.abbreviation="",this.attemptSubmit=!1,this.$snotify.success("Curso editado","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}},computed:Object(r["a"])({},Object(n["c"])(["getCourses","getCourseById","getLastCourseId","getCourseByName","getCourseByAbbreviation"]),{nameState:function(){return this.editId?this.name||this.attemptSubmit?!(!this.name&&this.attemptSubmit)&&(this.getCourseByName(this.name)===this.getCourseById(this.editId)||!this.getCourseByName(this.name)):null:this.name||this.attemptSubmit?!(!this.name&&this.attemptSubmit)&&!this.getCourseByName(this.name):null},nameInvalidFeedback:function(){return!this.name&&this.attemptSubmit?"Introduza o nome do curso":this.getCourseByName(this.name)?"Nome de curso em uso":null},nameValidFeedback:function(){return 50===this.name.length?"Máximo 50 caracteres":null},abbreviationState:function(){return this.editId?this.abbreviation||this.attemptSubmit?!(!this.abbreviation&&this.attemptSubmit)&&(this.abbreviation===this.abbreviation.replace(/[^a-z0-9]/gi,"")&&(this.getCourseByAbbreviation(this.abbreviation)===this.getCourseById(this.editId)||!this.getCourseByAbbreviation(this.abbreviation))):null:this.abbreviation||this.attemptSubmit?!(!this.abbreviation&&this.attemptSubmit)&&(this.abbreviation===this.abbreviation.replace(/[^a-z0-9]/gi,"")&&!this.getCourseByAbbreviation(this.abbreviation)):null},abbreviationInvalidFeedback:function(){return this.abbreviation!==this.abbreviation.replace(/[^a-z0-9]/gi,"")?"Introduza apenas letras e/ou números":this.getCourseByAbbreviation(this.abbreviation)?"Abreviação em uso":"Introduza a abreviação"},abbreviationValidFeedback:function(){return 6===this.abbreviation.length?"Máximo 6 caracteres":null}})},c=o,u=a("2877"),l=Object(u["a"])(c,s,i,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-2852f5f0.6628b397.js.map