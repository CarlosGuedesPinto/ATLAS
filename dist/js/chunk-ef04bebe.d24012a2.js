(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef04bebe"],{"14dc":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form",{on:{submit:function(e){e.preventDefault(),t.edit?t.editTag():t.addTag()}}},[a("b-form-group",{class:t.editId?"":"mt-4",attrs:{label:"Tag","label-for":"name","invalid-feedback":t.nameInvalidFeedback,"valid-feedback":t.nameValidFeedback,state:t.nameState}},[a("b-form-input",{attrs:{id:"name",state:t.nameState,type:"text",maxlength:"15"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("button",{staticClass:"btn btn-atlas1 col-12 mt-2",attrs:{type:"submit"}},[t.loadingSubmit?[a("b-spinner",{attrs:{variant:"atlas",small:"",label:"A carregar..."}})]:[t._v(t._s(t.editId?"Editar tag":"Adicionar tag"))]],2)],1),a("vue-snotify")],1)},i=[],r=a("be94"),n=(a("96cf"),a("1da1")),o=(a("7f7f"),a("2f62")),c={props:["edit"],data:function(){return{name:"",loadingSubmit:!1,attemptSubmit:!1,errors:{name:{error:!1,value:""}}}},created:function(){this.edit&&(this.name=this.getTagById(this.editId).name)},methods:{addTag:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.attemptSubmit=!0,!this.nameState){t.next=16;break}return t.prev=2,t.next=5,this.$http.post("/tags",{name:this.name});case 5:t.sent,this.name="",this.attemptSubmit=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e=t.t0.response.data,"name"===e.error.type&&(console.log(!0),this.errors.name.error=!0,this.errors.name.value=e.error.value,this.$snotify.error(e.message.pt,"",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}));case 14:t.next=17;break;case 16:this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});case 17:case"end":return t.stop()}},t,this,[[2,10]])}));function e(){return t.apply(this,arguments)}return e}(),editTag:function(){this.attemptSubmit=!0,this.nameState?(this.$store.dispatch("editTag",{id:this.editId,name:this.name}),this.name="",this.attemptSubmit=!1,this.$snotify.success("Tag editada","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}},computed:Object(r["a"])({},Object(o["c"])(["getTags","getTagById","getLastTagId","getTagByName"]),{nameState:function(){return this.name||this.attemptSubmit?!!(this.name&&this.name.trim()||!this.attemptSubmit)&&(!this.errors.name.error||this.name!==this.errors.name.value):null},nameInvalidFeedback:function(){return this.name&&this.name.trim()||!this.attemptSubmit?this.errors.name.error&&this.name===this.errors.name.value?"Tag em uso":null:"Introduza uma tag"},nameValidFeedback:function(){return 15===this.name.length?"Máximo 15 caracteres":null}})},u=c,l=a("2877"),m=Object(l["a"])(u,s,i,!1,null,null,null);e["a"]=m.exports},"1fdb":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[t.items.length>5?[a("div",{staticClass:"col-md-6 my-1"},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Filtrar"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Escreva para filtrar..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1),a("div",{staticClass:"col-md-6 my-1 mb-3"},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Por página"}},[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1)]:[a("div",{staticClass:"col-12 my-1"},[a("b-form-group",{staticClass:"mb-0",attrs:{horizontal:"",label:"Filtrar"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Escreva para filtrar..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1)]],2),a("b-table",{attrs:{items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,outlined:"",hover:"",responsive:"","empty-filtered-text":"Não há resultados para a sua pesquisa"},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered,"row-clicked":function(e){t.rowClicked(e)}},scopedSlots:t._u([{key:"name",fn:function(e){return"users"===t.name?[t._v(t._s(e.item.firstName+" "+e.item.lastName))]:void 0}},{key:"username",fn:function(e){return"users"===t.name?[t._v(t._s("@"+e.item.username))]:void 0}},{key:"tagName",fn:function(e){return"tags"===t.name?[t._v(t._s("#"+e.item.name))]:void 0}},{key:"courseName",fn:function(e){return"courses"===t.name?[t._v(t._s(e.item.name))]:void 0}},{key:"courseAbbreviation",fn:function(e){return"courses"===t.name?[t._v(t._s(e.item.abbreviation))]:void 0}},{key:"author",fn:function(e){return"events"===t.name&&3===t.getUserById(t.getLoggedUserId).profileId?[t._v(t._s(t.getUserById(e.item.authorId).username+" ("+e.item.authorId+")"))]:void 0}},{key:"tags",fn:function(e){return"events"===t.name&&3===t.getUserById(t.getLoggedUserId).profileId?[t._l(e.item.tags,function(e){return[t._v(t._s("#"+t.getTagNameById(e)))]})]:void 0}},{key:"actions",fn:function(e){return"courses"===t.name||"tags"===t.name?[a("button",{staticClass:"btn btn-danger float-right",on:{click:function(a){a.preventDefault(),t.btnRemoveClicked(parseInt(e.item.id))}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("button",{staticClass:"btn btn-warning text-white mx-2 float-right",on:{click:function(a){a.preventDefault(),t.btnEditClicked(parseInt(e.item.id))}}},[a("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}})])]:void 0}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.items.length>t.perPage,expression:"items.length > perPage"}],staticClass:"row"},[a("div",{staticClass:"my-1 mr-auto ml-auto"},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),a("vs-prompt",{attrs:{"vs-title":"Editar curso","vs-active":t.activePrompt,"vs-buttons-hidden":!0},on:{"update:vsActive":function(e){t.activePrompt=e}}},["courses"===t.name?a("FormCourse",{attrs:{editId:t.editId}}):t._e(),"tags"===t.name?a("FormTag",{attrs:{editId:t.editId}}):t._e()],1)],1)},i=[],r=(a("7f7f"),a("be94")),n=a("2f62"),o=a("c398"),c=a("14dc"),u={components:{FormCourse:o["a"],FormTag:c["a"]},props:["name","items","fields"],data:function(){return{currentPage:1,perPage:20,totalRows:this.items.length,pageOptions:[20,35,50],sortBy:null,sortDesc:!1,sortDirection:"asc",filter:null,activePrompt:!1,editId:0}},created:function(){var t=this;this.$store.subscribe(function(e){"EDIT_COURSE"!==e.type&&"EDIT_TAG"!==e.type||(t.activePrompt=!1)})},computed:Object(r["a"])({},Object(n["c"])(["getCourseById","getTagById","getUserById","getLoggedUserId","getTagNameById"]),{sortOptions:function(){return this.fields.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}}),methods:Object(r["a"])({},Object(n["b"])(["removeCourseById","removeTagById"]),{getNameUserType:function(t){switch(t){case 1:return"Aluno";case 2:return"Propon. evento.";case 3:return"Administrador"}},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},rowClicked:function(t){switch(this.name){case"users":this.$router.push({name:"profile",params:{username:t.username}});break;case"tags":this.$router.push({name:"events",query:{tags:this.getTagNameById(t.id)}});break;case"courses":this.$router.push({name:"events",query:{curso:this.getCourseById(t.id).name}});break;case"events":this.$router.push({name:"eventsInfo",params:{id:t.id}});break;default:break}},btnEditClicked:function(t){"courses"!==this.name&&"tags"!==this.name||(this.editId=t,this.activePrompt=!0)},btnRemoveClicked:function(t){var e=this;switch(this.name){case"courses":this.$vs.dialog({type:"confirm",color:"danger",title:"Remover curso?",acceptText:"Remover",cancelText:"Cancelar",text:"O curso ".concat(this.getCourseById(t).name," será removido para sempre."),accept:function(){e.removeCourseById(t),e.$snotify.success("Curso removido","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}});break;case"tags":this.$vs.dialog({type:"confirm",color:"danger",title:"Remover tag?",acceptText:"Remover",cancelText:"Cancelar",text:"A tag ".concat(this.getTagById(t).name," será removida para sempre."),accept:function(){e.removeTagById(t),e.$snotify.success("Tag removida","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}});break}}})},l=u,m=a("2877"),d=Object(m["a"])(l,s,i,!1,null,null,null);e["a"]=d.exports},"2f55":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-5"},[a("Panel",{attrs:{title:"Adicionar curso"}},[a("FormCourse")],1),t.loading?a("Panel",{staticClass:"mt-5",attrs:{title:"CURSOS - a carregar..."}},[a("b-spinner",{attrs:{variant:"atlas",label:"A carregar..."}})],1):a("Panel",{staticClass:"mt-5",attrs:{title:"Cursos - "+t.courses.length}},[a("DataTable",{attrs:{name:"courses",items:t.courses,fields:t.coursesFields}})],1)],1)},i=[],r=(a("96cf"),a("1da1")),n=a("9c974"),o=a("c398"),c=a("1fdb"),u=(a("2f62"),{components:{Panel:n["a"],FormCourse:o["a"],DataTable:c["a"]},created:function(){this.loadPage()},data:function(){return{courses:[],loading:!1,coursesFields:[{key:"courseName",label:"Nome",sortable:!0},{key:"courseAbbreviation",label:"Abreviação",sortable:!0},{key:"actions",label:""}]}},methods:{loadPage:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("RESET_STATE"),this.loading=!0,t.prev=2,t.next=5,this.$http.get("/courses");case 5:e=t.sent,200===e.status&&(this.courses=e.data.content.courses,this.loading=!1),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),this.$router.push({name:"home"});case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(){return t.apply(this,arguments)}return e}()}}),l=u,m=a("2877"),d=Object(m["a"])(l,s,i,!1,null,null,null);e["default"]=d.exports},"9c974":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"border border-atlas rounded bg-white px-0"},[a("h4",{staticClass:"bg-atlas1 text-white pl-3 py-2 atlas-bold"},[t._v(t._s(t.title))]),a("div",{staticClass:"px-3 pb-4"},[t._t("default")],2)])},i=[],r={name:"Panel",props:["title"]},n=r,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,null,null);e["a"]=c.exports},a481:function(t,e,a){a("214f")("replace",2,function(t,e,a){return[function(s,i){"use strict";var r=t(this),n=void 0==s?void 0:s[e];return void 0!==n?n.call(s,r,i):a.call(String(r),s,i)},a]})},c398:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form",{on:{submit:function(e){e.preventDefault(),t.editId?t.editCourse():t.addCourse()}}},[a("b-form-group",{class:t.editId?"":"mt-4",attrs:{label:"Nome","label-for":"name","invalid-feedback":t.nameInvalidFeedback,"valid-feedback":t.nameValidFeedback,state:t.nameState}},[a("b-form-input",{attrs:{id:"name",state:t.nameState,type:"text",maxlength:"50"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("b-form-group",{staticClass:"mt-4",attrs:{label:"Abreviatura","label-for":"abbreviation","invalid-feedback":t.abbreviationInvalidFeedback,"valid-feedback":t.abbreviationValidFeedback,state:t.abbreviationState}},[a("b-form-input",{attrs:{id:"abbreviation",state:t.abbreviationState,type:"text",maxlength:"6"},model:{value:t.abbreviation,callback:function(e){t.abbreviation=e},expression:"abbreviation"}})],1),a("button",{staticClass:"btn btn-atlas1 col-12 mt-2",attrs:{type:"submit"}},[t._v(t._s(t.editId?"Editar curso":"Adicionar curso"))])],1),a("vue-snotify")],1)},i=[],r=(a("a481"),a("be94")),n=(a("7f7f"),a("2f62")),o={props:["editId"],data:function(){return{name:"",abbreviation:"",attemptSubmit:!1}},created:function(){if(this.editId){var t=this.getCourseById(this.editId);this.name=t.name,this.abbreviation=t.abbreviation}},methods:{addCourse:function(){this.attemptSubmit=!0,this.nameState&&this.abbreviationState?(this.$store.dispatch("addCourse",{id:this.getLastCourseId+1,name:this.name,abbreviation:this.abbreviation}),this.name="",this.abbreviation="",this.attemptSubmit=!1):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},editCourse:function(){this.attemptSubmit=!0,this.nameState&&this.abbreviationState?(this.$store.dispatch("editCourse",{id:this.editId,name:this.name,abbreviation:this.abbreviation}),this.name="",this.abbreviation="",this.attemptSubmit=!1,this.$snotify.success("Curso editado","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):this.$snotify.error("Preencha todos os campos corretamente","",{timeout:2e3,showProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}},computed:Object(r["a"])({},Object(n["c"])(["getCourses","getCourseById","getLastCourseId","getCourseByName","getCourseByAbbreviation"]),{nameState:function(){return this.editId?this.name||this.attemptSubmit?!(!this.name&&this.attemptSubmit)&&(this.getCourseByName(this.name)===this.getCourseById(this.editId)||!this.getCourseByName(this.name)):null:this.name||this.attemptSubmit?!(!this.name&&this.attemptSubmit)&&!this.getCourseByName(this.name):null},nameInvalidFeedback:function(){return!this.name&&this.attemptSubmit?"Introduza o nome do curso":this.getCourseByName(this.name)?"Nome de curso em uso":null},nameValidFeedback:function(){return 50===this.name.length?"Máximo 50 caracteres":null},abbreviationState:function(){return this.editId?this.abbreviation||this.attemptSubmit?!(!this.abbreviation&&this.attemptSubmit)&&(this.abbreviation===this.abbreviation.replace(/[^a-z0-9]/gi,"")&&(this.getCourseByAbbreviation(this.abbreviation)===this.getCourseById(this.editId)||!this.getCourseByAbbreviation(this.abbreviation))):null:this.abbreviation||this.attemptSubmit?!(!this.abbreviation&&this.attemptSubmit)&&(this.abbreviation===this.abbreviation.replace(/[^a-z0-9]/gi,"")&&!this.getCourseByAbbreviation(this.abbreviation)):null},abbreviationInvalidFeedback:function(){return this.abbreviation!==this.abbreviation.replace(/[^a-z0-9]/gi,"")?"Introduza apenas letras e/ou números":this.getCourseByAbbreviation(this.abbreviation)?"Abreviação em uso":"Introduza a abreviação"},abbreviationValidFeedback:function(){return 6===this.abbreviation.length?"Máximo 6 caracteres":null}})},c=o,u=a("2877"),l=Object(u["a"])(c,s,i,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-ef04bebe.d24012a2.js.map